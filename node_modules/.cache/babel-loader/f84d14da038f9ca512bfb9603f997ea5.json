{"ast":null,"code":"var _jsxFileName = \"/Users/seanang/Orbital2021-Team-Invesfe/src/budgetTracker/ExpenseList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport ExpenseItem from \"./ExpenseItem\";\nimport { AppContext } from \"./AppContext\";\nimport { db, fire } from \"../config/Firebase.js\";\nimport { UserContext } from \"../components/UserContext\";\nimport { IfFirebaseAuthed } from \"@react-firebase/auth\";\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ExpenseList = () => {\n  _s();\n\n  const {\n    expenses\n  } = useContext(AppContext);\n  const [state, setState] = useState(expenses);\n  const currentUser = useContext(UserContext);\n  let history = useHistory();\n  const [filteredExpenses, setfilteredExpenses] = useState(state || []);\n  useEffect(() => {\n    setfilteredExpenses(state);\n  }, [state]);\n  useEffect(() => {\n    if (currentUser != null) {\n      db.child(\"users\").child(currentUser.uid).child(\"budget\").child(\"budgettracker\").child(\"expenseTotal\").on(\"value\", snapshot => {\n        const array = snapshot.val();\n\n        if (array != null) {\n          setState(array.expenses);\n        }\n      });\n    }\n  }, []);\n\n  const handleChange = event => {\n    const searchResults = state.filter(filteredExpense => filteredExpense.name.toLowerCase().includes(event.target.value));\n    setfilteredExpenses(searchResults);\n  };\n\n  const handleReset = e => {\n    if (window.confirm(\"Are you sure to reset?\")) {\n      e.preventDefault(); // window.location.reload();\n      // history.go(0);\n\n      if (currentUser != null) {\n        db.child(\"users\").child(currentUser.uid).child(\"budget\").child(\"budgettracker\").child(\"expenseTotal\").set([]);\n      }\n    } else {\n      e.preventDefault();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      class: \"form-control mb-2 mr-sm-2\",\n      placeholder: \"Type to search...\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      class: \"list-group mt-3 mb-3\",\n      children: filteredExpenses.map(expense => /*#__PURE__*/_jsxDEV(ExpenseItem, {\n        id: expense.id,\n        name: expense.name,\n        cost: expense.cost\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IfFirebaseAuthed, {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Reset\",\n        className: \"save-btn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ExpenseList, \"G2KaFwPqweYea7EOMXH29Dyg8/E=\", false, function () {\n  return [useHistory];\n});\n\n_c = ExpenseList;\nexport default ExpenseList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExpenseList\");","map":{"version":3,"sources":["/Users/seanang/Orbital2021-Team-Invesfe/src/budgetTracker/ExpenseList.js"],"names":["React","useContext","useState","useEffect","ExpenseItem","AppContext","db","fire","UserContext","IfFirebaseAuthed","useHistory","ExpenseList","expenses","state","setState","currentUser","history","filteredExpenses","setfilteredExpenses","child","uid","on","snapshot","array","val","handleChange","event","searchResults","filter","filteredExpense","name","toLowerCase","includes","target","value","handleReset","e","window","confirm","preventDefault","set","map","expense","id","cost"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport ExpenseItem from \"./ExpenseItem\";\nimport { AppContext } from \"./AppContext\";\nimport { db, fire } from \"../config/Firebase.js\";\nimport { UserContext } from \"../components/UserContext\";\nimport { IfFirebaseAuthed } from \"@react-firebase/auth\";\nimport { useHistory } from \"react-router\";\n\nconst ExpenseList = () => {\n  const { expenses } = useContext(AppContext);\n  const [state, setState] = useState(expenses);\n  const currentUser = useContext(UserContext);\n  let history = useHistory();\n\n  const [filteredExpenses, setfilteredExpenses] = useState(state || []);\n\n  useEffect(() => {\n    setfilteredExpenses(state);\n  }, [state]);\n\n  useEffect(() => {\n    if (currentUser != null) {\n      db.child(\"users\")\n        .child(currentUser.uid)\n        .child(\"budget\")\n        .child(\"budgettracker\")\n        .child(\"expenseTotal\")\n        .on(\"value\", (snapshot) => {\n          const array = snapshot.val();\n          if (array != null) {\n            setState(array.expenses);\n          }\n        });\n    }\n  }, []);\n\n  const handleChange = (event) => {\n    const searchResults = state.filter((filteredExpense) =>\n      filteredExpense.name.toLowerCase().includes(event.target.value)\n    );\n    setfilteredExpenses(searchResults);\n  };\n  const handleReset = (e) => {\n    if (window.confirm(\"Are you sure to reset?\")) {\n      e.preventDefault();\n\t\t// window.location.reload();\n\t\t// history.go(0);\n      if (currentUser != null) { \n        db.child(\"users\")\n          .child(currentUser.uid)\n          .child(\"budget\")\n          .child(\"budgettracker\")\n          .child(\"expenseTotal\")\n          .set([])\n      }\n    } else {\n      e.preventDefault();\n    }\n  };\n  return (\n    <>\n      <input\n        type=\"text\"\n        class=\"form-control mb-2 mr-sm-2\"\n        placeholder=\"Type to search...\"\n        onChange={handleChange}\n      />\n\n      <ul class=\"list-group mt-3 mb-3\">\n        {filteredExpenses.map((expense) => (\n          <ExpenseItem\n            id={expense.id}\n            name={expense.name}\n            cost={expense.cost}\n          />\n        ))}\n      </ul>\n\n      <IfFirebaseAuthed>\n      <input\n              type=\"submit\"\n              value={\"Reset\"}\n              className=\"save-btn\"\n            />\n      </IfFirebaseAuthed>\n    </>\n  );\n};\n\nexport default ExpenseList;\n"]},"metadata":{},"sourceType":"module"}