{"ast":null,"code":"var _jsxFileName = \"/Users/seanang/Orbital2021-Team-Invesfe/src/budgetTracker/Summary.js\",\n    _s = $RefreshSig$();\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { AppContext } from './AppContext';\nimport { db, fire } from \"../config/Firebase.js\";\nimport { UserContext } from \"../components/UserContext\";\nimport { IfFirebaseAuthed } from \"@react-firebase/auth\";\nimport ExpenseItem from './ExpenseItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Summary(props) {\n  _s();\n\n  const {\n    expenses\n  } = useContext(AppContext);\n  const {\n    budget,\n    needs,\n    wants,\n    financialGoals\n  } = props;\n  const [state, setState] = useState(expenses);\n  const currentUser = useContext(UserContext);\n  useEffect(() => {\n    if (currentUser != null) {\n      db.child(\"users\").child(currentUser.uid).child(\"budget\").child(\"budgettracker\").child(\"expenseTotal\").on(\"value\", snapshot => {\n        const array = snapshot.val();\n\n        if (array != null) {\n          setState(array.expenses);\n        }\n      });\n    }\n  }, []);\n  const totalExpenses = state.reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const needExpenses = state.filter(item => item.category == 1).reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const wantExpenses = state.filter(item => item.category == 2).reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const financialExpenses = state.filter(item => item.category == 3).reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const [filteredExpenses, setfilteredExpenses] = useState(state || []);\n  useEffect(() => {\n    setfilteredExpenses(state);\n  }, [state]);\n\n  const handleChange = event => {\n    const searchResults = state.filter(filteredExpense => filteredExpense.name.toLowerCase().includes(event.target.value));\n    setfilteredExpenses(searchResults);\n  };\n\n  const handleReset = () => {\n    if (window.confirm(\"Are you sure to reset?\")) {\n      setState([]);\n\n      if (currentUser != null) {\n        db.child(\"users\").child(currentUser.uid).child(\"budget\").child(\"budgettracker\").child(\"expenseTotal\").set([]);\n      }\n    }\n  };\n\n  const alertType = totalExpenses > budget ? 'alert-danger' : 'alert-success';\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: `alert p-4 ${alertType}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Remaining: $\", budget - totalExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" Needs: $\", needs / 100 * budget - needExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" Wants: $\", wants / 100 * budget - wantExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" Financial Goals: $\", financialGoals / 100 * budget - financialExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-primary p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Spent so far (Total): $\", totalExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Spent so far (Needs): $\", needExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Spent so far (Wants): $\", wantExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Financial Goals so far: $\", financialExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      class: \"form-control mb-2 mr-sm-2\",\n      placeholder: \"Type to search...\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      class: \"list-group mt-3 mb-3\",\n      children: filteredExpenses.map(expense => /*#__PURE__*/_jsxDEV(ExpenseItem, {\n        id: expense.id,\n        name: expense.name,\n        cost: expense.cost\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mt-3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(IfFirebaseAuthed, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"reset-btn\",\n        onClick: () => handleReset(),\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Summary, \"XP+QQEviaRDY3ATQ9rfbxIrFvJA=\");\n\n_c = Summary;\nexport default Summary;\n\nvar _c;\n\n$RefreshReg$(_c, \"Summary\");","map":{"version":3,"sources":["/Users/seanang/Orbital2021-Team-Invesfe/src/budgetTracker/Summary.js"],"names":["React","useContext","useState","useEffect","AppContext","db","fire","UserContext","IfFirebaseAuthed","ExpenseItem","Summary","props","expenses","budget","needs","wants","financialGoals","state","setState","currentUser","child","uid","on","snapshot","array","val","totalExpenses","reduce","total","item","cost","needExpenses","filter","category","wantExpenses","financialExpenses","filteredExpenses","setfilteredExpenses","handleChange","event","searchResults","filteredExpense","name","toLowerCase","includes","target","value","handleReset","window","confirm","set","alertType","map","expense","id"],"mappings":"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","sourcesContent":["import \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { AppContext } from './AppContext';\nimport { db, fire } from \"../config/Firebase.js\";\nimport { UserContext} from \"../components/UserContext\";\nimport { IfFirebaseAuthed } from \"@react-firebase/auth\";\nimport ExpenseItem from './ExpenseItem';\n\n\n\nfunction Summary (props){\n\n    const { expenses } = useContext(AppContext);\n\tconst { budget, needs, wants, financialGoals } = props;\n\tconst[state, setState] = useState(expenses);\n\tconst currentUser = useContext(UserContext);\n\n    useEffect(() => {\n\t\tif (currentUser != null) {\n\t\t  db.child(\"users\")\n\t\t\t.child(currentUser.uid)\n\t\t\t.child(\"budget\")\n\t\t\t.child(\"budgettracker\")\n\t\t\t.child(\"expenseTotal\")\n\t\t\t.on(\"value\", (snapshot) => {\n\t\t\tconst array = snapshot.val();\n\t\t\tif (array != null) {\n\t\t\tsetState(array.expenses);\n\t\t\t}\n\t\t});\n\t  }}, []);\n\n\tconst totalExpenses = state.reduce((total, item) => {\n\t\treturn (total += item.cost);\n\t}, 0);\n\n\tconst needExpenses = state.filter((item) => item.category == 1 ).reduce((total, item) => {\n\t\treturn (total += item.cost);\n\t}, 0);\n\n\tconst wantExpenses = state.filter((item) => item.category == 2 ).reduce((total, item) => {\n\t\treturn (total += item.cost);\n\t}, 0);\n\n\tconst financialExpenses = state.filter((item) => item.category == 3 ).reduce((total, item) => {\n\t\treturn (total += item.cost);\n\t}, 0);\n\n    const [filteredExpenses, setfilteredExpenses] = useState(state || []);\n\n\tuseEffect(() => {\n\t\tsetfilteredExpenses(state);\n\t}, [state]);\n\n\tconst handleChange = (event) => {\n\t\tconst searchResults = state.filter((filteredExpense) =>\n\t\t\tfilteredExpense.name.toLowerCase().includes(event.target.value)\n\t\t);\n\t\tsetfilteredExpenses(searchResults);\n\t\t\n\t};\n\tconst handleReset = () => {\n\t\tif (window.confirm(\"Are you sure to reset?\")) {\n\t\t\tsetState([]);\n\t\t  if (currentUser != null) {\n\t\t\tdb.child(\"users\")\n\t\t\t.child(currentUser.uid)\n\t\t\t.child(\"budget\")\n\t\t\t.child(\"budgettracker\")\n\t\t\t.child(\"expenseTotal\")\n\t\t\t.set([])\n\t\t\t}\n\t\t  }\n\t\t}\n\n    const alertType = totalExpenses > budget? 'alert-danger' : 'alert-success';\n\n    return(\n        <>\n\t\t<div className=\"col-sm\">\n        <div class={`alert p-4 ${alertType}`}>\n\t\t\t<span>Remaining: ${budget- totalExpenses}</span>\n\t\t\t<br></br>\n\t\t\t<span> Needs: ${needs/100 * budget - needExpenses}</span>\n\t\t\t<br></br>\n\t\t\t<span> Wants: ${wants/100 * budget - wantExpenses}</span>\n\t\t\t<br></br>\n\t\t\t<span> Financial Goals: ${financialGoals/100 * budget - financialExpenses}</span>\n\t\t</div>\n\t\t</div>\n\t\t<div className=\"col-sm\">\n        <div class='alert alert-primary p-4'>\n        <span>Spent so far (Total): ${totalExpenses}</span>\n        <br></br>\n        <span>Spent so far (Needs): ${needExpenses}</span>\n        <br></br>\n        <span>Spent so far (Wants): ${wantExpenses}</span>\n        <br></br>\n        <span>Financial Goals so far: ${financialExpenses}</span>\n    \t</div>\n\t\t</div>\n\n    <input\n\t\ttype='text'\n\t\tclass='form-control mb-2 mr-sm-2'\n\t\tplaceholder='Type to search...'\n\t\tonChange={handleChange}\n\t/>\n\t\t\t<ul class='list-group mt-3 mb-3'>\n\t\t\t\t{filteredExpenses.map((expense) => (\n\t\t\t\t\t<ExpenseItem\n\t\t\t\t\t\tid={expense.id}\n\t\t\t\t\t\tname={expense.name}\n\t\t\t\t\t\tcost={expense.cost}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t\t<div className=\"row mt-3\"></div>\n\t\t\t<IfFirebaseAuthed>\n\t\t\t<button className=\"reset-btn\" onClick={() => handleReset()}>\n\t\t\t\tReset\n\t\t\t</button>\n\t\t\t</IfFirebaseAuthed>\n    </>\n\n    )\n}\n\nexport default Summary;"]},"metadata":{},"sourceType":"module"}