{"ast":null,"code":"var _jsxFileName = \"/Users/seanang/Orbital2021-Team-Invesfe/src/budgetTracker/Summary.js\",\n    _s = $RefreshSig$();\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { AppContext } from \"./AppContext\";\nimport { db, fire } from \"../config/Firebase.js\";\nimport { UserContext } from \"../components/UserContext\";\nimport { IfFirebaseAuthed } from \"@react-firebase/auth\";\nimport ExpenseItem from \"./ExpenseItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Summary(props) {\n  _s();\n\n  const {\n    expenses\n  } = useContext(AppContext);\n  const {\n    budget,\n    needs,\n    wants,\n    financialGoals\n  } = props;\n  const [state, setState] = useState(expenses);\n  const currentUser = useContext(UserContext);\n  useEffect(() => {\n    if (currentUser != null) {\n      db.child(\"users\").child(currentUser.uid).child(\"budget\").child(\"budgettracker\").child(\"expenseTotal\").on(\"value\", snapshot => {\n        const array = snapshot.val();\n\n        if (array != null) {\n          setState(array.expenses);\n        }\n      });\n    }\n  }, []);\n  const totalExpenses = state.reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const needExpenses = state.filter(item => item.category == 1).reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const wantExpenses = state.filter(item => item.category == 2).reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const financialExpenses = state.filter(item => item.category == 3).reduce((total, item) => {\n    return total += item.cost;\n  }, 0);\n  const [filteredExpenses, setfilteredExpenses] = useState(state || []);\n  useEffect(() => {\n    setfilteredExpenses(state);\n  }, [state]);\n\n  const handleChange = event => {\n    const searchResults = state.filter(filteredExpense => filteredExpense.name.toLowerCase().includes(event.target.value));\n    setfilteredExpenses(searchResults);\n  };\n\n  const handleReset = () => {\n    if (window.confirm(\"Are you sure to reset?\")) {\n      setState([]);\n\n      if (currentUser != null) {\n        db.child(\"users\").child(currentUser.uid).child(\"budget\").child(\"budgettracker\").child(\"expenseTotal\").set([]);\n      }\n    }\n  };\n\n  const alertType = totalExpenses > budget ? \"alert-danger\" : \"alert-success\";\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: `alert p-4 ${alertType}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Remaining: $\", budget - totalExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" Needs: $\", needs / 100 * budget - needExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" Wants: $\", wants / 100 * budget - wantExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" \", \"Financial Goals: $\", financialGoals / 100 * budget - financialExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-primary p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Spent so far (Total): $\", totalExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Spent so far (Needs): $\", needExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Spent so far (Wants): $\", wantExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Financial Goals so far: $\", financialExpenses]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      class: \"form-control mb-2 mr-sm-2\",\n      placeholder: \"Type to search...\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          class: \"list-group mt-3 mb-3\",\n          children: filteredExpenses.map(expense => /*#__PURE__*/_jsxDEV(ExpenseItem, {\n            id: expense.id,\n            name: expense.name,\n            cost: expense.cost\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IfFirebaseAuthed, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"reset-btn\",\n            onClick: () => handleReset(),\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Summary, \"XP+QQEviaRDY3ATQ9rfbxIrFvJA=\");\n\n_c = Summary;\nexport default Summary;\n\nvar _c;\n\n$RefreshReg$(_c, \"Summary\");","map":{"version":3,"sources":["/Users/seanang/Orbital2021-Team-Invesfe/src/budgetTracker/Summary.js"],"names":["React","useContext","useState","useEffect","AppContext","db","fire","UserContext","IfFirebaseAuthed","ExpenseItem","Summary","props","expenses","budget","needs","wants","financialGoals","state","setState","currentUser","child","uid","on","snapshot","array","val","totalExpenses","reduce","total","item","cost","needExpenses","filter","category","wantExpenses","financialExpenses","filteredExpenses","setfilteredExpenses","handleChange","event","searchResults","filteredExpense","name","toLowerCase","includes","target","value","handleReset","window","confirm","set","alertType","map","expense","id"],"mappings":"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","sourcesContent":["import \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { AppContext } from \"./AppContext\";\nimport { db, fire } from \"../config/Firebase.js\";\nimport { UserContext } from \"../components/UserContext\";\nimport { IfFirebaseAuthed } from \"@react-firebase/auth\";\nimport ExpenseItem from \"./ExpenseItem\";\n\nfunction Summary(props) {\n  const { expenses } = useContext(AppContext);\n  const { budget, needs, wants, financialGoals } = props;\n  const [state, setState] = useState(expenses);\n  const currentUser = useContext(UserContext);\n\n  useEffect(() => {\n    if (currentUser != null) {\n      db.child(\"users\")\n        .child(currentUser.uid)\n        .child(\"budget\")\n        .child(\"budgettracker\")\n        .child(\"expenseTotal\")\n        .on(\"value\", (snapshot) => {\n          const array = snapshot.val();\n          if (array != null) {\n            setState(array.expenses);\n          }\n        });\n    }\n  }, []);\n\n  const totalExpenses = state.reduce((total, item) => {\n    return (total += item.cost);\n  }, 0);\n\n  const needExpenses = state\n    .filter((item) => item.category == 1)\n    .reduce((total, item) => {\n      return (total += item.cost);\n    }, 0);\n\n  const wantExpenses = state\n    .filter((item) => item.category == 2)\n    .reduce((total, item) => {\n      return (total += item.cost);\n    }, 0);\n\n  const financialExpenses = state\n    .filter((item) => item.category == 3)\n    .reduce((total, item) => {\n      return (total += item.cost);\n    }, 0);\n\n  const [filteredExpenses, setfilteredExpenses] = useState(state || []);\n\n  useEffect(() => {\n    setfilteredExpenses(state);\n  }, [state]);\n\n  const handleChange = (event) => {\n    const searchResults = state.filter((filteredExpense) =>\n      filteredExpense.name.toLowerCase().includes(event.target.value)\n    );\n    setfilteredExpenses(searchResults);\n  };\n  const handleReset = () => {\n    if (window.confirm(\"Are you sure to reset?\")) {\n      setState([]);\n      if (currentUser != null) {\n        db.child(\"users\")\n          .child(currentUser.uid)\n          .child(\"budget\")\n          .child(\"budgettracker\")\n          .child(\"expenseTotal\")\n          .set([]);\n      }\n    }\n  };\n\n  const alertType = totalExpenses > budget ? \"alert-danger\" : \"alert-success\";\n\n  return (\n    <>\n      <div className=\"col-sm\">\n        <div class={`alert p-4 ${alertType}`}>\n          <span>Remaining: ${budget - totalExpenses}</span>\n          <br></br>\n          <span> Needs: ${(needs / 100) * budget - needExpenses}</span>\n          <br></br>\n          <span> Wants: ${(wants / 100) * budget - wantExpenses}</span>\n          <br></br>\n          <span>\n            {\" \"}\n            Financial Goals: $\n            {(financialGoals / 100) * budget - financialExpenses}\n          </span>\n        </div>\n      </div>\n      <div className=\"col-sm\">\n        <div class=\"alert alert-primary p-4\">\n          <span>Spent so far (Total): ${totalExpenses}</span>\n          <br></br>\n          <span>Spent so far (Needs): ${needExpenses}</span>\n          <br></br>\n          <span>Spent so far (Wants): ${wantExpenses}</span>\n          <br></br>\n          <span>Financial Goals so far: ${financialExpenses}</span>\n        </div>\n      </div>\n\n      \n          <input\n            type=\"text\"\n            class=\"form-control mb-2 mr-sm-2\"\n            placeholder=\"Type to search...\"\n            onChange={handleChange}\n          />\n\t\t  <div className=\"row\">\n\t\t  <div className=\"col-sm\">\n          <ul class=\"list-group mt-3 mb-3\">\n            {filteredExpenses.map((expense) => (\n              <ExpenseItem\n                id={expense.id}\n                name={expense.name}\n                cost={expense.cost}\n              />\n            ))}\n          </ul>\n\t\t\t\t\n          <IfFirebaseAuthed>\n            <button className=\"reset-btn\" onClick={() => handleReset()}>\n              Reset\n            </button>\n          </IfFirebaseAuthed>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Summary;\n"]},"metadata":{},"sourceType":"module"}